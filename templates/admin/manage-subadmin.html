{% extends 'base.html' %}
{% block content %}
  <div class="pagetitle">
      <h1>Manage Subadmin</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">dashboard</a></li>
          <li class="breadcrumb-item">Manage Subadmin</li>
        </ol>
      </nav>
  </div><!-- End Page Title -->

  <section class="section">
    <div class="row">
      <div class="col-lg-12" style="padding-left: 100px;padding-right: 100px;">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Manage Subadmin</h5>

            {% if messages %}
              {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                  {{ message }}
                  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
              {% endfor %}
            {% endif %}

            <!-- Primary Color Bordered Table -->
            <table class="table table-bordered border-primary">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Name</th>
                  <th scope="col">Email</th>
                  <th scope="col">Date Joined</th>
                  <th scope="col">Action</th>
                </tr>
              </thead>
              <tbody>
                {% for i in subadmin %}
                <tr>
                  <th scope="row">{{ forloop.counter }}</th>
                  <td>{{ i.first_name }} {{ i.last_name }}</td>
                  <td>{{ i.email }}</td>
                  <td>{{ i.date_joined|date:"d-m-Y H:i" }}</td>
                  <td>
                    <!-- Fixed Edit Button -->
                    <a href="{% url 'update_subadmin_profile' i.id %}" class="btn btn-success">EDIT</a>

                    <a href="{% url 'delete_subadmin' i.id %}" class="btn btn-danger" 
                       onclick="return confirm('Are you sure you want to delete this subadmin?');">
                       DELETE
                    </a>
                  </td>
                </tr>
                {% empty %}
                <tr>
                  <td colspan="5" style="text-align:center;">No subadmins found.</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>

            <!-- Pagination -->
            <div class="pagination" style="padding-top: 10px; text-align: center;">
              <span class="step-links">
                  {% if subadmin.has_previous %}
                      <a href="?page=1">&laquo; first</a>
                      <a href="?page={{ subadmin.previous_page_number }}">previous</a>
                  {% endif %}
          
                  <span class="current">
                      Page {{ subadmin.number }} of {{ subadmin.paginator.num_pages }}.
                  </span>
          
                  {% if subadmin.has_next %}
                      <a href="?page={{ subadmin.next_page_number }}">next</a>
                      <a href="?page={{ subadmin.paginator.num_pages }}">last &raquo;</a>
                  {% endif %}
              </span>
            </div>
            <!-- End Pagination -->

          </div>
        </div>
      </div>
    </div>
  </section>
{% endblock %}